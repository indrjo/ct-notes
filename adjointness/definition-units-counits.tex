% !TEX program = lualatex
% !TEX spellcheck = en_GB
% !TEX root = ../adjointness.tex

\section{Definition, units and counits}

%Example~\ref{example:DefineLinearFunctionsI} and~\ref{example:DefineLinearFunctionsII} of the introduction should have triggered your attention. If not, look at them closely now: after the initial restyling of one result of Linear Algebra, it is just a matter of categories and functors. 
%
%\begin{construction}
%Let \(\cat C\) and \(\cat J\) two categories, \(a\) one of its objects and take a functor \(F : \cat J \to \cat C\). We have the category \(a {\downarrow} F\) made as follows:
%\begin{tcbitem}
%\item the objects are the morphisms \(a \to F(x)\) of \(\cat C\), with \(x\) being an object of \(\cat J\);
%\item the morphisms from \(f : a \to F(x)\) to \(g : a \to F(y)\) are the morphisms \(h : x \to y\) of \(\cat J\) such that
%\[\begin{tikzcd}[row sep=small]
% & F(x) \ar["{F(h)}", dd] \\
%a \ar["f", ur] \ar["g", dr, swap] \\
% & F(y)
%\end{tikzcd}\]
%commutes;
%\item the composition is that of \(\cat J\). 
%\end{tcbitem}
%\end{construction}
%
%\begin{proposition}\label{proposition:AdjunctionAsInitialInCommaCategory}
%Suppose given two locally small categories \(\cat C\) and \(\cat D\), two functors
%\[\begin{tikzcd}[column sep=small]
%\cat C \ar["L", r, shift left] & \cat D \ar["R", l, shift left]
%\end{tikzcd}\]
%and a natural transformation \(\eta : \id_{\cat C} \tto RL\) such that \(\eta_x : x \to RL(x)\) is initial in \(x {\downarrow} R\) \NotaInterna{did we introduce comma categories?} for every \(x \in \obj{\cat C}\).  Then, for \(x \in \obj{\cat C}\) and \(y \in \obj{\cat D}\), the functions
%\[\alpha_{x,y} : \cat D(L(x), y) \to \cat C(x, R(y)) \,,\ \alpha_{x,y}(f) := R(f)\eta_x\]
%form an adjunction \(\alpha : L \dashv R\).
%\end{proposition}
%
%\begin{exercise}
%Look at Example~\ref{example:DefineLinearFunctionsI} and~\ref{example:DefineLinearFunctionsII}: isolate what in the proposition is the natural transformation \(\eta\). Can you prove the theorem by yourself?
%\end{exercise}
%
%\begin{proof}[Proof of Proposition~\ref{proposition:AdjunctionAsInitialInCommaCategory}]
%The fact that \(\eta_x\) is initial object implies that these function are all bijective. Now, we just need to verify the transformation is natural. Take \(x, x' \in \obj{\cat C}\), \(y, y' \in \obj{\cat D}\), \(f \in \cat C(x', x)\) and \(g \in \cat D(y, y')\) and examine the square
%\[\begin{tikzcd}[column sep=large]
%\cat D(L(x), y) \ar["{\cat D(L(f), g)}", d, swap] \ar["{\alpha_{x,y}}", r] & \cat C(x, R(y)) \ar["{\cat C(f, R(g))}", d] \\
%\cat C(x', R\left(y'\right)) \ar["{\alpha_{x',y'}}", r, swap] & \cat C(x', R(y'))
%\end{tikzcd}\]
%For \(h \in \cat D(L(x), y)\), we have
%\begin{align*}
%& \cat C(f, R(g)) (\alpha_{x,y} (h)) = R(g) R(h) \eta_x f = R(gh) \eta_x f \\
%& \alpha_{x',y'} (\cat D (L(f), g)(h)) = R(guL(f)) \eta_{x'} = R(gu) RL(f) \eta_{x'}
%\end{align*}
%By the naturality of \(\eta\), we have \(\eta_x f = RL(f) \eta_{x'}\), and the proof ends here.
%\end{proof}
%
%Here is another example in the spirit of the initial example about vector spaces and of the proposition just proved here.
%
%\begin{example}[Isomorphism Theorem for Set Theory]
%We have defined \(\Eqv\) earlier, recall it here. Let us introduce the functor
%\[E : \Set \to \Eqv\]
%that maps a set \(X\) to a setoid \((X, =_X)\), where \(=_X\) is the equality relation over \(X\), and a function \(f : X \to Y\) to itself regarded as morphisms of setoids. Besides, Corollary~\ref{cor:SetIso2} gives a functor
%\[P : \Eqv \to \Set .\]
%Consequently, Proposition~\ref{proposition:SetIso1} can be easily rephrased more concisely as:
%\begin{quotation}
%the canonical projection \((X, \sim) \to E(P(X, \sim))\) is initial in \((X, \sim) \downarrow E\).
%\end{quotation}
%\end{example}
%
%There is the dual of Proposition~\ref{proposition:AdjunctionAsInitialInCommaCategory} as well.
%
%\begin{proposition}\label{proposition:AdjunctionAsTerminalInCommaCategory}
%Suppose given two locally small categories \(\cat C\) and \(\cat D\), two functors
%\[\begin{tikzcd}[column sep=small]
%\cat C \ar["L", r, shift left] & \cat D \ar["R", l, shift left]
%\end{tikzcd}\]
%and a natural transformation \(\theta : LR \tto \id_{\cat D}\) such that \(\theta_y : LR(y) \to y\) is terminal in \(L {\downarrow} y\) for every \(y \in \obj{\cat C}\).  Then, for \(x \in \obj{\cat C}\) and \(y \in \obj{\cat D}\), the functions
%\begin{align*}
%\cat C(x, R(y)) & \to \cat D(L(x), y) \\
%f &\to \theta_y L(f)
%\end{align*}
%form an adjunction \(L \dashv R\).
%\end{proposition}
%
%\begin{exercise}
%The proof is left to you.
%\end{exercise}

%The natural isomorphism \(\xi\) of the is what we have been striving for along the whole example. The phenomenon has a name.

\begin{definition}[Adjunctions]
Consider two locally small categories and two functors as in
\[\begin{tikzcd}[column sep=small]
\cat C \ar["L", r, shift left] & \cat D \ar["R", l, shift left]
\end{tikzcd}\]
An {\em adjunction} from \(L\) to \(R\) any natural isomorphism
%
\begin{equation}
\begin{tikzcd}[column sep=large]
\op{\cat C} \times \cat D
  \ar["{\cat D(L(\hole), \hole)}"{name=A}, r, bend left=35] 
  \ar["{\cat C(\hole, R(\hole))}"{name=B}, r, bend right=35, swap]
  & \Set
\ar["\alpha", from=A, to=B, natural]
\end{tikzcd}
\label{diagram:AdjunctionI}\end{equation}
We say \(L\) is the {\em left adjoint} and \(R\) is the {\em right adjoint}: the reason behind the naming comes from when we write the bijection
\[\cat D (L(x), y) \cong \cat C (x, R(y))\]
\(L\) occurs in \(\cat D (L(x), y)\) applied to the argument on the left, while \(R\) appears in \(\cat C (x, R(y))\) applied on the right.
Adjunctions are usually written as \(\alpha : L \dashv R\). Sometimes \(L \dashv R\) is written to mean that there is an adjunction in between without specifying which one. If on the the paper we are writing there is space, we can write something like
%
\begin{equation}
\begin{tikzcd}
\cat C \ar["L"{name=L}, r, bend left] & \cat D \ar["R"{name=R}, l, bend left]
\ar["\perp"{description}, from=L, to=R, phantom]
\end{tikzcd}
\label{diagram:AdjunctionII}\end{equation}
%
which has in addition shows the categories involved.
\end{definition}

%\begin{remark}
%In~\eqref{diagram:AdjunctionII} there is not the information of direction, as there is in~\eqref{diagram:AdjunctionI}. An adjunction is a natural isomorphism, but we must be explicit when we are using the components of the adjunction and not make the reader waste to much time for inferring what we are doing. There is some abuse of notation that help.
%
%One is dropping the pedices used to distinguish the components of a natural transformation. \NotaInterna{Talk about that!} Although this requires more space, we sometimes embed type signatures, being that more transparent and comfortable for both writers and readers. Writing
%%
%\[\alpha\left(L(x) \functo f y\right)\]
%%
%is more immediate than \(\alpha_{x,y}(f)\) and \(\alpha(f)\).
%
%Another abuse is when we are (willingly) careless about directions. If we have the adjunction~\eqref{diagram:AdjunctionI}, then we may sometimes happen to write
%\[\alpha (g) \quad\text{for } g : x \to R(y) .\]
%Of course, we mean \(\inv\alpha_{x,y}(g)\), bear with us.
%
%However, observe how the abuse drives to something that may baffle:
%\[\alpha(\alpha(h)) = h\]
%We are not saying that \(\alpha\) is idempotent. If \(h : L(x) \to y\), then it is to be read like
%\[\inv\alpha_{x, y} \left(\alpha_{x, y} (h)\right) = h .\] 
%If \(h : x \to R(y)\), then it is to be read like
%\[\alpha_{x, y} \left(\inv\alpha_{x, y} (h)\right) = h .\] 
%\end{remark}

We will soon return to the introductory example later; as for now, let us indulge a bit more on the definition of adjunction.

\begin{exercise}[Partial functions]
For \(A\) and \(B\) sets, a {\em partial function} from \(A\) to \(B\) is relation \(f \subseteq A \times B\) with the property
\begin{center}
for every \(x \in A\) and \(y_1, y_2 \in B\), if \((x, y_1) \in f\) and \((x, y_2) \in f\) then \(y_1 = y_2\).
\end{center}
We want to compose partial functions as well: provided \(f \in \Par(A, B)\) and \(g \in \Par(B, C)\),
\[gf \coloneq \set{(x, y) \in A \times C \mid (x, z) \in f \text{ and } (z, y) \in g \text{ for some } z \in B} .\]
It is immediate to verify \(\Par\) complies the rules that make it a category. Indeed, this is the {\em category of partial functions}, written as \(\Par\): here, the objects are sets and the morphisms are partial functions.\newline
Suppose given a partial function \(f : A \to B\). For every \(x \in A\) the possibilities are two: there is one element of \(B\) bound to is, and we write it \(f(x)\), or none. What if we considered {\em no value} as an output value? Provided two sets \(A\) and \(B\) and a partial function \(f : A \to B\), we assign an actual function
\[\bar f : A \to B+1 \,, \ \bar f(x) \coloneq \begin{cases} f(x) & \text{if \(x\) has an element of \(B\) bound} \\ \ast & \text{otherwise} \end{cases}\]
where \(1 \coloneq \set{\ast}\) with \(\ast\) designating the absence of output. It is quite simple to show that
\[\Par(A, B) \to \Set(A, B+1)\,,\ f \to \bar f\]
is a bijection for every couple of sets \(A\) and \(B\). Now it's up to you to categorify this: find two functors that make an adjunction
\[\begin{tikzcd}
\Set \ar["I"{name=I}, r, bend left] & \Par \ar["J"{name=J}, l, bend left]
\ar["\perp"{description}, phantom, from=I, to=J]
\end{tikzcd}\]
\end{exercise}

\begin{figure}
\centering
\begin{tabular}{c}
\input{adjointness/unit.qtikz} \\
\midrule \\
\input{adjointness/counit.qtikz}
\end{tabular}
\caption{Units and co-units of an adjunction}
\end{figure}

\begin{proposition}
Provided you have locally small categories and functors
\[\begin{tikzcd}[column sep=small]
\cat C \ar["L", r, shift left] & \cat D \ar["R", l, shift left]
\end{tikzcd}\]
and an adjunction
\[\alpha : \cat D(L(\hole), \hole) \to \cat C(\hole, R(\hole)) .\]
Then:
\begin{tcbenum}
\item For \(x \in \obj{\cat C}\) the morphisms
\[\eta_x : x \to RL(x) \,,\ \eta_x := \alpha_{x, L(x)}\left(\id_{L(x)}\right)\]
form a natural transformation \(\eta : \id_{\cat C} \tto RL\) such that \(\eta_x\) is initial in \(x {\downarrow} R\).
\item For \(y \in \obj{\cat C}\) the morphisms
\[\theta_y : LR(y) \to y \,,\ \theta_y := \inv\alpha_{R(y),y} \left(\id_{R(y)}\right)\]
form a natural transformation \(\theta : LR \tto \id_{\cat D}\) such that \(\theta_y\) is terminal in \(L {\downarrow} y\).
\end{tcbenum}
\end{proposition}

\begin{proof}\NotaInterna{Rewrite proof.}
Let us write the adjunction of the statement above as
\[\bar\hole : \cat D (L(\hole), \hole) \tto \cat C (\hole, R(\hole)) .\]
We verify that
\[\begin{tikzcd}
x \ar["{\eta_x}", r] \ar["f", d, swap] & RL(x) \ar["RL(f)", d] \\
y \ar["{\eta_y}", r, swap] & RL(y)
\end{tikzcd}\]
commutes for every \(f\) in \(\cat C\). In fact,
\begin{align*}
& RL(f) \eta_x = RL(f) \bar{\id_{L(x)}} \id_x = \bar{L(f) \id_{L(x)} \id_{L(x)}} = \bar{L(f)} \\
& \eta_y f = R(\id_{L(y)}) \bar{\id_{L(y)}} f = \bar{\id_{L(y)} \id_{L(y)} L(f)} = \bar{L(f)} .
\end{align*}
It remains to show that the morphisms \(\eta_x : x \to RL(x)\) are initial in \(x {\downarrow} R\). In \(\cat C\) we draw
\[\begin{tikzcd}
x \ar["{\eta_x}", r] \ar["g", dr, swap] & RL(x) \\
& R(y)
\end{tikzcd}\]
We know that there is one and only one \(h : L(x) \to y\) such that \(g = \bar{h}\). Then
\[g = \bar{h \id_{L(x)} L\left(\id_x\right)} = R(h) \bar{\id_{L(x)}} \id_{x} = R(h) \eta_x . \qedhere .\]
\end{proof}

%\begin{proposition}
%Suppose now you have locally small categories \(\cat C\) and \(\cat D\), functors
%\[\begin{tikzcd}
%\cat C \ar["L", r, shift left] & \cat D \ar["R", l, shift left]
%\end{tikzcd}\]
%and an adjunction \(L \dashv R\). For \(y \in \obj{\cat C}\) write \(\theta_y : LR(y) \to y\) the morphism in \(\cat D\) corresponding to \(\id_{R(y)}\) of \(\cat C\). Then the morphisms \(\theta_y\) form a natural transformation \(\theta : LR \tto \id_{\cat D}\). Moreover, \(\theta_y\) is terminal in \(L {\downarrow} y\).
%\end{proposition}
%
%\begin{exercise}
%Prove the last two theorems.
%\end{exercise}

\begin{example}[Prescribing functions via currying]
\YetToBeTeXed
\end{example}

\NotaInterna{Yet there is something left to say\dots{}}
